# 服务网格的未来

> 原文地址：<https://blogs.vmware.com/opensource/2018/10/16/service-mesh-architectures-inevitable/>，<https://blogs.vmware.com/opensource/2018/10/23/service-mesh-whats-next/>
>
> 主题：服务网格的未来
>
> 发布时间：2018-10-16，2018-10-24
> 
> 作者：Stephen McPolin & Venil Noronha
> 
> 译者：[陈冬](https://github.com/shaobai)
>
> 审校：
>
> 类型：博客

## 第一部分: 服务网格的架构是必然会发生的，并且越来越重要

在几个月前 Istio 的 1.0 版本发布时，TechCrunch 就宣称“这是目前最重要的新的开源项目之一”。它虽然不是很完美（在本系列文章的第2部分中有详细说明），但是这个版本确实标志着服务网格体系架构开发的一个重要阶段。

尽管 Istio 新版本的发布已经得到了人们的关注，但是在开源领域中，服务网格仍然有些模糊。因此，在此发布的两篇文章中，我们将首先提供一个窗口，了解服务网格做什么，然后在第二部分中，通过了解在不久的将来我们可以从它那里获得什么。

关于服务网格，我们需要了解的一点是，当微服务开始流行，他们就基本上是不可避免的。这是因为，本质上是它们作为平台运行，目的在与解决这些服务间通信日益复杂的挑战。

下面是它们的工作方式：假设你有一个微服务在客户的数据库中查询支付方法，另一个服务处理支付。如果你希望确保信息不被他们中的任何一个泄漏，或者你总是将客户信息链接到正确的支付处理器，那么你需要对他们之间的通信进行加密。服务网格可以为此进行加密，而不需要任何一个服务知道如何保护加密本身。

但服务网格的作用远远不止于此。总的来说，他们关心广泛的通行特性，包括：

  1. 可观察性 - 服务之间的日志记录和度量
  1. 发现 - 启用服务链接在一起寻找服务
  1. 通信 - 为通信制定策略、方法和安全
  1. 认证 - 建立服务和通信的访问权限
  1. 平台支持 - 跨多个后端平台（Azure，AWS 等）和服务编排（Kubernetes，Nginx 等）

你可以看到对开发人员的吸引力--在每次构建为服务时，服务网格会处理掉大部分他们不愿意去处理的事情。这对系统管理员和运维团队来说也是一个福音，他们不需要和开发人员协商，就可以将需要的特性构建到任何特性的微服务中。至少在理论上，客户是收益的，因为他们可以更快的部署他们的市场特定的服务。

考虑到这些优势，要达到这个目标基本上是更加不可避免的。起初，人们创建了自己的通信网格。不久，常见的模式出现，常见的方法开始聚合，最后采取了平台解决方案的形式。

两年前，Google 开源了自己的服务网格平台 Istio。这并不是第一个服务网格，也不是最成熟的，但是它是增长最快的，1.0 的首次发布标志着服务网格故事的新阶段。

再次引用 TechCrunch 的文章：“如果你不加入服务网格，这是可以理解的。” 但是，尽管目前情况可能如此，由于上述种种原因，我们认为这种情况也很有可能发生很大的变化。这就是为什么我们投入了大量的时间和精力来贡献于 VMware 的服务开发的原因。

在这篇博文的第二部分，我们将概述如何为 VMware 的开源服务网格开发作出贡献，并描述这些体系结构在开始成熟之后所面临的主要问题。

## 第二部分：在 Istio 1.0 发布后会发生什么？

在我们的服务网格系列的第一部分中，我们认为服务网格是微服务体系架构发展的必然和有益的结果。随着 Istio 1.0 的发布，我们在服务网格领域提供方面已经经过了一个重要的里程碑，在这个恰当的时间节点上需要考虑下一步该如何进行。

当然，在 VMware中，我们相信开源的服务网格架构非常值得我们花时间和努力来支持。我们已经成为 Istio 和 Envoy 的贡献成为，这是 Istio 用来动态控制微服务的特定的开源服务代理。尤其是，我们在改善网络方面投入了大量的精力，并在其他领域定期作出贡献。

我们也考虑到事实上，几乎每个 Istio 的演示目前都是基于一个单一的示例。保加利亚的一位 VMware 同事目前正在构建一个全新的 Istio 演示示例，用于演示如何在封闭字幕等服务之间管理视频质量，并演示 Istio 在微服务环境中的动态路由的能力。

因为我们认为服务网格是有价值的，而且可以一直存在，所以我们一只在寻求将 VMware 自己的世界级系统管理工具继承到服务网格框架中。一个很好的例子是我们最近创建了一个适配器，将 Istio metrics 导出到 VMware 的 Wavefront 监测和分析工具中。如果我们能够将微服务中的更多信息合并到我们的系统管理工具中，我们相信这些工具能够更好的管理系统。

![](https://ws2.sinaimg.cn/large/006tNbRwgy1fwp4etrgwvj30sg0iz782.jpg)

从我们的角度来看，这样的工作是为了扩大微观服务生态系统。然而，服务网格平台本身还不够完善。例如，Istio 是一个复杂的软件，当它不能正常工作时很难调试。当它在工作，在帮助你发现你的微服务架构正常运行又是很棒的。当它不能正常工作，又很难弄清楚它为什么不能工作。这在社区中被广泛理解的，并且我们一直在花时间和精力思考如何克服这种复杂性，但目前我们还没有解决这个问题。

服务网格平台也是刚刚开始处理多集群情况。如果你将你的软件部署在一个集群上，像 Istio 和 Envoy 这样的服务通常能够很好的管理他们。但是你希望将单集群扩展到多集群，并让服务在集群边界上进行通信（从安全的角度来看是一个好想法），那这可能是一个挑战。再次，Istio 社区理解这一点，我们正在逐步改进，多集群友好的设计。

最后，我们正在关注一个新的倡议，来自 Google 的 Knative。从根本上说，这是基于 Kubernetes 和 Istio 在 Google 的“功能即服务”的概念中构建的。看起来在不久的将来，它将向 Istio 提出更多的要求，但是目前还不清楚这些要求从何而来。例如，“事件”对于 Istio 来说是一个完全陌生的概念，但是对于处理临时数据还是必要的。Knative 为此增加了一些工具，这将对 Istio 产生压力。

现在，我们只是在看到 Space—Knative 推出了大约一个半月，并且还有很多问题没有解决，此时我们在决定如何应对之前正在寻找更新。因此，双方都有足够的工作和关注。但是可以肯定的是，服务网格会在此有所停留。